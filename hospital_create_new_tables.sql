#TASK1
CREATE TABLE SPECIALIZATIONS (
	ID SERIAL PRIMARY KEY,
	NAME VARCHAR(100) NOT NULL
);

INSERT INTO SPECIALIZATIONS (NAME) VALUES
('Cardiology'),
('Dermatology'),
('Endocrinology'),
('Gastroenterology'),
('Hematology'),
('Neurology'),
('Orthopedics'),
('Pediatrics'),
('Psychiatry'),
('Urology');

CREATE TABLE DOCTORS_SPECIALIZATIONS (
	DOCTOR_ID INT REFERENCES DOCTORS(ID),
	SPECIALIZAYION_ID INT REFERENCES SPECIALIZATIONS(ID),
	PRIMARY KEY (DOCTOR_ID, SPECIALIZATION_ID)
);

INSERT INTO DOCTORS_SPECIALIZATIONS (DOCTOR_ID, SPECIALIZATION_ID)
VALUES (1, 1),
		(2, 2),
		(3, 3),
		(4, 4),
		(5, 5),
		(6, 5),
		(7, 7),
		(8, 8),
		(9, 9),
		(10, 10),
		(11, 1),
		(12, 2),
		(13, 3),
		(14, 4),
		(15, 5),
		(16, 5),
		(17, 7),
		(18, 8),
		(19, 9),
		(20, 10);

CREATE TABLE DONATIONS (
	ID SERIAL PRIMARY KEY,
	AMOUNT MONEY NOT NULL CHECK (AMOUNT >= 0::MONEY),
	DONATION_DATE DATE NOT NULL CHECK (DONATION_DATE <= CURRENT_DATE) DEFAULT CURRENT_DATE,
	DEPARTMENT_ID INT REFERENCES DEPARTMENTS(ID),
	SPONSOR_ID INT REFERENCES SPONSORS(ID)
);

INSERT INTO DONATIONS (AMOUNT, DEPARTMENT_ID, SPONSOR_ID) VALUES
(1000.00, 1, 1),
(2500.00, 5, 2),
(1500.00, 10, 3),
(500.00, 15, 4),
(2000.00, 2, 5),
(3000.00, 7, 6),
(1200.00, 12, 7),
(800.00, 18, 8),
(3500.00, 4, 9),
(1800.00, 20, 10);

CREATE TABLE SPONSORS (
	ID SERIAL PRIMARY KEY,
	NAME VARCHAR(100) NOT NULL UNIQUE
);


INSERT INTO SPONSORS (NAME) VALUES
('ABC Pharmaceuticals'),
('XYZ Medical Devices'),
('MediCare Insurance'),
('HealthFirst Clinic'),
('Wellness Innovations'),
('Global Health Foundation'),
('Hope Hospital Group'),
('Unity Healthcare Solutions'),
('Community Care Network'),
('LifeSavers Pharmaceuticals');

CREATE TABLE VACATIONS (
	ID SERIAL PRIMARY KEY,
	START_DATE DATE NOT NULL,
	END_DATE DATE NOT NULL CHECK(END_DATE > START_DATE),
	DOCTOR_ID INT REFERENCES DOCTORS(ID)	
);

INSERT INTO VACATIONS (START_DATE, END_DATE, DOCTOR_ID) VALUES
('2024-06-01', '2024-06-07', 1),
('2024-07-10', '2024-07-15', 2),
('2024-08-05', '2024-08-12', 3),
('2024-09-20', '2024-09-25', 14),
('2024-10-03', '2024-10-10', 5),
('2024-11-15', '2024-11-20', 6),
('2024-12-01', '2024-12-05', 17),
('2025-01-10', '2025-01-15', 8),
('2025-02-20', '2025-02-25', 9),
('2025-03-08', '2025-03-14', 10);


ALTER TABLE WARDS ADD COLUMN DEPARTMENT_ID INT REFERENCES DEPARTMENTS(ID) DEFAULT 1;

UPDATE WARDS
SET DEPARTMENT_ID = FLOOR(RANDOM() * 20) + 1;

CREATE TABLE DOCTORS_EXAMINATIONS (
	DOCTOR_ID INT REFERENCES DOCTORS(ID),
	EXAMINATION_ID INT REFERENCES EXAMINATIONS(ID),
	PRIMARY KEY (DOCTOR_ID, EXAMINATION_ID)
);


INSERT INTO DOCTORS_EXAMINATIONS (DOCTOR_ID, EXAMINATION_ID)
VALUES (1, 1),
		(2, 2),
		(3, 3),
		(4, 4),
		(5, 15),
		(6, 5),
		(7, 7),
		(8, 8),
		(9, 19),
		(10, 10),
		(11, 1),
		(12, 2),
		(13, 3),
		(14, 18),
		(15, 5),
		(16, 5),
		(17, 20),
		(18, 8),
		(19, 9),
		(20, 17);
		
ALTER TABLE EXAMINATIONS 
ADD COLUMN DEPARTMENT_ID INT REFERENCES DEPARTMENTS(ID) DEFAULT 1;

UPDATE EXAMINATIONS
SET DEPARTMENT_ID = FLOOR(RANDOM() * 20) + 1;

ALTER TABLE EXAMINATIONS 
ADD COLUMN DISEASE_ID INT REFERENCES DISEASES(ID) DEFAULT FLOOR(RANDOM() * 20) + 1;

ALTER TABLE DOCTORS 
ADD COLUMN DEPARTMENT_ID INT REFERENCES DEPARTMENTS(ID) DEFAULT FLOOR(RANDOM() * 20) + 1;

ALTER TABLE DOCTORS_EXAMINATIONS
ADD COLUMN EXAMINATION_DATE DATE NOT NULL DEFAULT CURRENT_DATE